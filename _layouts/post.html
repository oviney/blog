---
layout: default
---

<article class="economist-article">
  <header class="article-header">
    {% if page.categories %}
    <div class="article-category">
      <a href="{{ '/blog/' | relative_url }}" class="category-link">{{ page.categories | first | capitalize | replace: '-', ' ' }}</a>
    </div>
    {% endif %}

    <h1 class="article-title">{{ page.title }}</h1>

    {% if page.excerpt %}
    <h2 class="article-subtitle">{{ page.excerpt }}</h2>
    {% endif %}

    <div class="article-meta">
      {% if page.image %}
      <div class="share-icons">
        <button class="share-btn" aria-label="Share article"><span class="icon-share">Share</span></button>
      </div>
      {% endif %}
      <time datetime="{{ page.date | date_to_xmlschema }}" class="meta-date">
        {{ page.date | date: "%b %-d" }}{% assign day = page.date | date: "%-d" %}{% if day == "1" or day == "21" or day == "31" %}st{% elsif day == "2" or day == "22" %}nd{% elsif day == "3" or day == "23" %}rd{% else %}th{% endif %} {{ page.date | date: "%Y" }}
      </time>
      <span class="meta-separator">|</span>
      <span class="meta-read-time">
        {% assign words = page.content | number_of_words %}
        {{ words | divided_by: 180 | plus: 1 }} min read
      </span>
    </div>
  </header>

  {% if page.image %}
  <figure class="article-hero-image">
    <img src="{{ page.image | relative_url }}" alt="{{ page.title }}" loading="eager">
  </figure>
  {% endif %}

  <div class="article-body">
    {{ content }}
  </div>

  {% if page.ai_assisted %}
  <aside class="article-disclosure">
    <p><em>This article was created with AI assistance. All content has been reviewed and verified for accuracy.</em></p>
  </aside>
  {% endif %}

  <footer class="article-footer">
    <div class="article-actions">
      <button class="reuse-btn">Reuse this content</button>
    </div>
  </footer>
</article>

{% if site.posts.size > 1 %}
<aside class="related-articles">
  <h2 class="related-heading">More from {{ page.categories | first | capitalize | replace: '-', ' ' | default: "the blog" }}</h2>
  <div class="related-grid">
    {% assign current_category = page.categories | first %}
    {% assign related_posts = site.posts | where_exp: "post", "post.url != page.url" %}
    {% assign same_category_posts = "" | split: "" %}
    {% assign other_posts = "" | split: "" %}
    
    {% comment %} Separate posts by category match {% endcomment %}
    {% for post in related_posts %}
      {% if post.categories contains current_category %}
        {% assign same_category_posts = same_category_posts | push: post %}
      {% else %}
        {% assign other_posts = other_posts | push: post %}
      {% endif %}
    {% endfor %}
    
    {% comment %} Merge: same category first, then others {% endcomment %}
    {% assign all_related = same_category_posts | concat: other_posts %}
    
    {% for post in all_related limit: 6 %}
        <article class="related-card">
          {% if post.image %}
          <a href="{{ post.url | relative_url }}" class="related-image-link">
            <img src="{{ post.image | relative_url }}" alt="{{ post.title }}" loading="lazy">
          </a>
          {% endif %}
          <div class="related-content">
            <h3 class="related-title">
              <a href="{{ post.url | relative_url }}">{{ post.title }}</a>
            </h3>
            {% if post.excerpt %}
            <p class="related-excerpt">{{ post.excerpt | strip_html | truncatewords: 20 }}</p>
            {% endif %}
          </div>
        </article>
    {% endfor %}
  </div>
</aside>
{% endif %}
